# 版辊加工工厂微信小程序开发需求文档

## 项目概述

本项目旨在为版辊加工工厂开发一个微信小程序，作为本地工厂管理软件的辅助工具。该小程序将部署在阿里云主机上，实现工厂生产流程的数字化管理和工人绩效跟踪。

## 项目背景

- **工厂类型**: 版辊加工工厂
- **业务场景**: 每张合同最多包含8个产品，每个产品最多包含100个生产工序
- **用户群体**: 车间工人、管理员
- **部署环境**: 阿里云服务器

## 功能需求

### 1. 用户认证系统
- **微信一键登录**: 工人使用微信号一键登录小程序
- **身份匹配**: 
  - 系统获取微信提供的用户ID
  - 与小程序服务器存储的员工ID进行匹配
  - 匹配成功：进入对应工人的个人工作页面
  - 匹配失败：进入员工匹配页面，等待管理员绑定

### 2. 工人操作功能
- **个人工序查看**: 工人只能看到分配给自己的生产工序
- **扫码完成工序**: 
  - 扫描合同上的二维码
  - 标识对应工序已完成
  - 自动记录完成时间和工人信息
- **绩效记录**: 
  - 记录生产数量（暂不计算金额）
  - 记录生产的产品信息
  - 统计个人工作完成情况

### 3. 管理页面功能
- **产品类型管理**: 
  - 添加、编辑、删除产品类型
  - 设置产品类型对应的工序流程
- **工序管理**: 
  - 定义各种工序类型
  - 设置工序顺序和依赖关系
- **员工管理**: 
  - 添加、编辑员工信息
  - 绑定员工微信ID
  - 分配员工可操作的工序权限
- **合同与产品管理**: 
  - 录入合同信息
  - 分配产品到具体工序
  - 生成二维码

### 4. 数据统计功能
- **生产进度监控**: 实时查看各合同的生产进度
- **工人绩效统计**: 统计各工人的生产数量和效率
- **工序完成情况**: 查看各工序的完成状态

## 技术架构

### 前端 - 微信小程序
- **框架**: 微信小程序原生开发或uni-app
- **UI组件库**: WeUI 或 Vant Weapp
- **主要页面**:
  - 登录页面
  - 工人个人工作台
  - 扫码页面
  - 管理后台页面
  - 数据统计页面

### 后端 - Node.js/Python
- **推荐框架**: 
  - Node.js: Express + Sequelize
  - Python: Flask/Django + SQLAlchemy
- **主要功能模块**:
  - 用户认证模块
  - 权限管理模块
  - 数据管理模块
  - API接口模块

### 数据库 - MySQL
- **主要数据表**:
  - 员工表 (employees)
  - 产品类型表 (product_types)
  - 工序表 (processes)
  - 合同表 (contracts)
  - 产品表 (products)
  - 工序记录表 (process_records)
  - 绩效表 (performance)

### 部署环境 - 阿里云
- **云服务器**: ECS实例
- **数据库**: RDS MySQL
- **对象存储**: OSS (存储图片、文档)
- **CDN**: 加速静态资源访问
- **SSL证书**: HTTPS安全访问

## 配置管理

所有关键参数通过配置文件管理，包括：
- 数据库连接信息
- 微信小程序配置
- 阿里云服务配置
- 业务参数配置

## 安全要求

1. **数据安全**:
   - 敏感信息加密存储
   - SQL注入防护
   - XSS攻击防护

2. **访问控制**:
   - 基于角色的权限管理
   - 操作日志记录
   - 异常访问监控

3. **通信安全**:
   - HTTPS协议传输
   - API接口鉴权
   - 数据传输加密

## 性能要求

- **响应时间**: 页面加载时间 < 2秒
- **并发处理**: 支持100个并发用户
- **数据处理**: 支持大量工序数据的高效查询和统计
- **稳定性**: 系统可用性 > 99%

## 开发计划

### 第一阶段：基础功能开发
1. 搭建项目框架
2. 实现用户认证系统
3. 开发基础的工序管理功能
4. 实现扫码完成工序功能

### 第二阶段：管理功能开发
1. 开发管理后台界面
2. 实现产品类型和工序管理
3. 完善员工管理功能
4. 开发合同和产品管理模块

### 第三阶段：优化和部署
1. 数据统计功能开发
2. 性能优化和测试
3. 阿里云环境部署
4. 系统上线和维护

## 测试要求

1. **单元测试**: 核心业务逻辑测试覆盖率 > 80%
2. **集成测试**: API接口完整性测试
3. **用户测试**: 真实环境下的用户体验测试
4. **性能测试**: 压力测试和性能调优

## 维护和支持

1. **技术文档**: 提供完整的技术文档和用户手册
2. **培训支持**: 为管理员提供系统使用培训
3. **维护服务**: 提供bug修复和功能更新服务
4. **监控报警**: 建立系统监控和异常报警机制

## 项目交付物

1. **源代码**: 完整的前后端源代码
2. **配置文件**: 所有环境配置模板
3. **数据库脚本**: 数据库创建和初始化脚本
4. **部署文档**: 详细的部署和配置说明
5. **用户手册**: 系统使用说明文档
6. **技术文档**: API文档和系统架构文档

---

*本文档将指导AI开发团队完成版辊加工工厂微信小程序的开发工作，确保项目按需求高质量交付。*