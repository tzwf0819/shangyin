# 部署与运行指南

本文档说明如何在本地环境进行开发调试，以及如何将系统部署到阿里云生产环境。

## 一、本地开发环境搭建

### 1. 前端小程序

1. 安装微信开发者工具：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
2. 在工具中打开项目目录 `wechat0917/frontend`
3. 修改 `project.config.json` 中的 `appid` 为您的微信小程序 AppID
4. 选择“详情”→“项目设置”，配置服务器域名（需添加 `https://api.example.com`）
5. 点击“编译”，调试并预览小程序

### 2. 后端服务

1. 安装 Node.js (v16+)
2. 进入后端目录：
   ```powershell
   cd wechat0917/backend
   ```
3. 安装依赖：
   ```powershell
   npm install
   ```
4. 配置环境变量：复制 `.env.example` 为 `.env`，填写数据库及微信、JWT、OSS 等配置信息
5. 初始化数据库：
   ```powershell
   mysql -u factory_user -p factory_management < database/schema.sql
   mysql -u factory_user -p factory_management < database/init_data.sql
   ```
6. 启动服务：
   ```powershell
   npm start
   ```
7. 服务默认监听 `http://localhost:3000`

## 二、阿里云生产环境部署

部署流程详见 `阿里云部署指南.md`，主要步骤如下：

1. 在阿里云控制台准备 ECS、RDS、Redis、OSS 等资源
2. 在 ECS 上安装 Node.js、MySQL、Nginx 等软件
3. 拉取项目代码，配置 `.env`，执行数据库初始化脚本
4. 运行后端服务：`pm2 start app.js --name wechat-app`
5. 使用微信开发者工具上传前端小程序代码
6. 可选配置 Nginx 反向代理及 SSL，加速静态资源访问
7. 配置监控与日志，保证高可用与安全

---

更多细节请参见项目根目录下的文档：
- `阿里云部署指南.md`
- `本地系统集成方案.md`
- `配置文件模板.md`
- `数据库设计文档.md`
- `API接口文档.md`